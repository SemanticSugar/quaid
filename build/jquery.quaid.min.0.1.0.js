(function(b){var h=/xyz/.test(function(){})?/\b(_super|_class)\b/:/.*/;b.CLASS_NAMESPACE="class";b.QUAID="quaid";b[b.QUAID]={};window.Q=b[b.QUAID];b[b.CLASS_NAMESPACE]||(b[b.CLASS_NAMESPACE]={});(function(){var a=false;this.Class=function(){};this.Class.prototype.init=function(c,d,e){this.container=c;this.settings=b.extend({},e,d)};Class.extend=function(){function c(m){return typeof m=="string"||m instanceof String}function d(m){return m instanceof Object}function e(){!a&&this.init&&this.init.apply(this,
arguments)}var g,f,i;if(arguments.length==1&&d(arguments[0]))i=arguments[0];else if(arguments.length==2&&d(arguments[0])&&d(arguments[1])){f=arguments[0];i=arguments[1]}else if(arguments.length==2&&c(arguments[0])&&d(arguments[1])){g=arguments[0];i=arguments[1]}else if(arguments.length==3&&c(arguments[0])&&d(arguments[1])&&d(arguments[2])){g=arguments[0];f=arguments[1];i=arguments[2]}else throw Error("extend() not called correctly!");if(g){if(b.fn[g])throw Error("You cannot define '"+g+"' more than once!");
b.fn[g]=function(m){var p=[];this.each(function(){var j=b(this),q=j.data(g);if(!q)if(b[b.CLASS_NAMESPACE][g]){q=new b[b.CLASS_NAMESPACE][g](j,m);j.data(g,q);q.TYPE=g}else b.log("Cannot find $."+b.CLASS_NAMESPACE+"."+g+"!");p.push(q)});if(p.length==1)return p[0];if(!p.length)return null;return p}}var l=this.prototype;a=true;var n=new this;a=false;for(var o in i)n[o]=typeof i[o]=="function"&&typeof l[o]=="function"&&h.test(i[o])?function(m,p,j){return function(){var q=this._super,r=this._class;this._super=
l[m];this._class=j;var s=p.apply(this,arguments);this._super=q;this._class=r;return s}}(o,i[o],e):i[o];f&&b.extend(e,f);e.prototype=n;e.constructor=e;e.extend=arguments.callee;if(g)b[b.CLASS_NAMESPACE][g]=e;return e}})()})(jQuery);
(function(b){b.log=function(){if(b.log.enabled)b.log.logFn.apply(null,arguments)||b.isFunction(b.log.failoverFn)&&b.log.failoverFn(arguments)};b.log.enabled=true;b.log.failoverToFirebugLite=true;b.log.firebugLiteUrl="https://getfirebug.com/firebug-lite-beta.js";b.log.level=0;b.log.DEBUG="DEBUG:";b.log.INFO="INFO:";b.log.WARNING="WARNING:";b.log.ERROR="ERROR:";b.log.LOG="LOG:";b.log.LEVEL_ORDER=[b.log.DEBUG,b.log.INFO,b.log.WARNING,b.log.ERROR,b.log.LOG];b.log.LEVEL_FUNCTIONS={};b.log.LEVEL_FUNCTIONS[b.log.DEBUG]=
"debug";b.log.LEVEL_FUNCTIONS[b.log.INFO]="info";b.log.LEVEL_FUNCTIONS[b.log.WARNING]="warn";b.log.LEVEL_FUNCTIONS[b.log.ERROR]="error";b.log.LEVEL_FUNCTIONS[b.log.LOG]="log";b.log.logFn=function(){if(window.console&&window.console.log&&b.isFunction(window.console.log)){for(var c,d=window.console.log,e=[],g=0;g<arguments.length;g++)e.push(arguments[g]);if(arguments.length>0&&(c=b.log.LEVEL_ORDER.indexOf(arguments[0]))>-1){c=window.console[b.log.LEVEL_FUNCTIONS[b.log.LEVEL_ORDER[c]]];if(b.isFunction(c)){d=
c;e=e.slice(1)}}d.apply(window.console,e);return true}return false};b.log._specialLog=function(c,d){for(var e=[c],g=0;g<d.length;g++)e.push(d[g]);b.log.apply(this,e)};for(var h=0;h<b.log.LEVEL_ORDER.length;h++){var a=b.log.LEVEL_FUNCTIONS[b.log.LEVEL_ORDER[h]];a!="log"&&function(c){b[a]=function(){c>=b.log.level&&b.log._specialLog(b.log.LEVEL_ORDER[c],arguments)}}(h)}b.log.failoverFn=function(c){function d(g){var f=setInterval(function(){if(b.log.logFn.apply(null,c)){clearInterval(f);b.isFunction(g)&&
g()}},100)}if(b.log.failoverToFirebugLite)if(b.log.loading)d();else{b.log.loading=true;var e=b("<script/>",{type:"text/javascript",src:b.log.firebugLiteUrl});b("body").append(e);d(function(){b.log.loading=false})}else if(b.SimpleConsole){window.console=b("body").SimpleConsole();b.log.logFn.apply(null,c)}}})(jQuery);
(function(b){var h=b[b.QUAID];b.extend(b,{isString:function(a){return typeof a=="string"||a instanceof String},isNumber:function(a){return typeof a=="number"},isObject:function(a){return!b.isString(a)&&!b.isArray(a)&&!(a instanceof Date)&&a instanceof Object},round:function(a,c){return Math.round(a*Math.pow(10,c))/Math.pow(10,c)},zeroPad:function(a,c){a=""+a;if(a.length>=c)return a;for(var d=[],e=c-a.length,g=0;g<e;g++)d.push("0");return d.join("")+a},pluralize:function(a,c,d,e){c=c;if(a==1)c=d;else if(a==
0&&b.isString(e))c=e;return c.replace("{0}",a)},andJoin:function(a){if(a.length==0)return"";if(a.length==1)return a[0];return a.slice(0,a.length-1).join(", ")+" and "+a[a.length-1]},replace:function(a,c){function d(g,f,i){for(;g.indexOf(f)>-1;)g=g.replace(f,i);return g}if(b.isArray(c))for(var e=0;e<c.length;e++)a=d(a,"{"+e+"}",c[e]);else if(b.isObject(c))for(e in c)a=d(a,"{"+e+"}",c[e]);return a},commifyNumber:function(a,c){if(c){var d=Math.pow(10,c);a=parseInt(Math.round(Math.round(a/d)*d))}a=""+
a;var e=a.split(".");d=e[0];var g=null;if(e.length>1)g=e[1];e=a[0]=="-";d=d.replace("-","");var f="";d=d.split("").reverse();for(var i=0;i<d.length;i++){if(i!=0&&i%3==0)f=","+f;f=d[i]+f}if(g)f+="."+g;if(e)f="-"+f;return f},parseDate:function(a,c){if(!a)return null;if(a.constructor==Date||b.isNumber(a))return new Date(a);if(!b.isString(a)||!c)return null;for(var d=a.split(/\W+/),e=c.split(/\W+/),g,f,i,l,n,o=new Date,m=0;m<d.length;m++)switch(e[m]){case "d":case "e":g=parseInt(d[m],10);break;case "m":f=
parseInt(d[m],10)-1;break;case "Y":case "y":i=parseInt(d[m],10);i+=i>100?0:i<29?2E3:1900;break;case "H":case "I":case "k":case "l":l=parseInt(d[m],10);break;case "P":case "p":if(/pm/i.test(d[m])&&l<12)l+=12;else if(/am/i.test(d[m])&&l>=12)l-=12;break;case "M":n=parseInt(d[m],10)}return new Date(i===undefined?o.getFullYear():i,f===undefined?o.getMonth():f,g===undefined?o.getDate():g,l===undefined?0:l,n===undefined?0:n,0)},formatDate:function(a,c){var d=a.getMonth(),e=a.getDate(),g=a.getFullYear(),
f=a.getDay(),i=a.getHours(),l=i>=12,n=l?i-12:i;if(n==0)n=12;for(var o=a.getMinutes(),m=a.getSeconds(),p=c.split(""),j,q=0;q<p.length;q++){j=p[q];switch(p[q]){case "a":j=h.daysShort[f];break;case "A":j=h.days[f];break;case "b":j=h.monthsShort[d];break;case "B":j=h.months[d];break;case "C":j=1+Math.floor(g/100);break;case "d":j=b.zeroPad(e,2);break;case "e":j=e;break;case "H":j=b.zeroPad(i,2);break;case "I":j=b.zeroPad(n,2);break;case "j":j=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var r=
new Date(a.getFullYear(),0,0,0,0,0);j=b.zeroPad(Math.floor((j-r)/864E5),3);break;case "k":j=i;break;case "l":j=n;break;case "m":j=b.zeroPad(1+d,2);break;case "M":j=b.zeroPad(o,2);break;case "p":j=l?"pm":"am";break;case "P":j=l?"PM":"AM";break;case "s":j=Math.floor(a.getTime()/1E3);break;case "S":j=b.zeroPad(m,2);break;case "u":j=f+1;break;case "w":j=f;break;case "y":j=(""+g).substr(2,2);break;case "Y":j=g}p[q]=j}return p.join("")},extendUrl:function(a,c){var d=a.indexOf("?"),e=a,g="";if(d>-1){e=a.substring(0,
d);g=a.substring(d)}return e+"?"+b.serializeUrlParams(b.extend(b.parseUrlParams(g),c))},serializeUrlParams:function(a){return b.param(a)},parseUrlParams:function(a){if(!a)return{};var c=a.indexOf("?");if(c>-1)a=a.substring(c+1);var d={};a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,g,f){if(e)d[g]=f});return d},redirect:function(a){window.location.replace(a)},reload:function(){window.location.reload()}});b.extend(h,{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],
daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["S","M","T","W","T","F","S","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});h.controlChars=[8,16,17,18,19,20,27,33,34,35,36,37,38,39,40,46];h.DataFormatters={dateParseFormat:"m.d.Y H:M",datetimeFormat:"b e, Y H:M",dateFormat:"b e, Y",_parseInterpreter:function(a){var c=
{};a=/([A-Za-z_]+)(\(([0-9]+)\))?/.exec(a);c.fn=a[1];c.num=a[3]?parseInt(a[3]):null;return c},get:function(a,c){var d=h.DataFormatters,e=d._parseInterpreter(a);if(e.fn in d){var g=[c];e.num&&g.push(e.num);return d[e.fn].apply(this,g)}return c},number:function(a){if(b.isString(a))return a;return!a?"0":b.commifyNumber(parseInt(a))},decimal:function(a,c){if(b.isString(a))return a;return!a?"0":b.commifyNumber(b.round(a,c==undefined?4:c)+"")},percent:function(a,c){return h.DataFormatters.decimal(a,c)+
"%"},dollar:function(a){if(b.isString(a))return a;return!a?"$0.00":"$"+h.DataFormatters.decimal(a,2)},date:function(a){if(!a)return"N/A";a=b.parseDate(a,h.DataFormatters.dateParseFormat);return b.formatDate(a,h.DataFormatters.dateFormat)},datetime:function(a){if(!a)return"N/A";a=b.parseDate(a,h.DataFormatters.dateParseFormat);return b.formatDate(a,h.DataFormatters.datetimeFormat)},bool:function(a){return a?"Yes":"No"},checkbox:function(a){return'<input class="checkbox" type="checkbox" '+(a?'checked="checked"':
"")+"/>"}}})(jQuery);
(function(b){var h=b[b.QUAID];b.ajaxOriginal=b.ajax;b.ajax=function(a){if(a.dataType&&a.dataType=="json"){var c=function(){};if(!b.isFunction(a.applicationError))a.applicationError=c;var d=function(f){for(var i={general:[],field:[]},l=0;f.errors&&l<f.errors.length;l++)"field"in f.errors[l]&&f.errors[l].field?i.field.push(f.errors[l]):i.general.push(f.errors[l]);f.errors.length>0&&h.asyncErrors.add(f.errors,a.form);a.applicationError.call(this,"applicationerror",i);(f=h.asyncErrors.getUnhandledErrors())&&b.isFunction(h.handleApplicationErrors)&&
h.handleApplicationErrors.call(this,f)},e=a.success||function(){};a.success=function(f,i,l){if(l.status){f||b.warn("No data returned from the server! Request args:",a);h.handleSuccess(f,a);f&&(f.status=="fail"||f.errors&&f.errors.length)?d(f):e.call(this,f,i)}};var g=a.error||function(){};a.error=function(f,i,l){if(f.status>=500){var n=null;try{n=jQuery.httpData(f,a.dataType,a)}catch(o){b.warn("ERROR: Failed to parse error data from the server. Is your response in",a.dataType,"?","Error:",o)}a.applicationError.call(this,
"servererror",f.status);h.handleServerError.call(this,n,f,i,l)}else if(f.status>=400)try{n=jQuery.httpData(f,a.dataType,a);d(n)}catch(m){a.applicationError.call(this,"parsererror",m)}else{n="[Unknown]";try{n=f.responseText||f.responseXML}catch(p){}var j="[Unknown Error]";if(l)j=l.number+": "+l.description;b.log("$.ajax Error ",j,", http status: ",f.status,":",i,"; original",n)}g.call(this,f,i,l)}}return b.ajaxOriginal(a)};h.handleSuccess=function(){};h.handleServerError=function(){alert("Oops. An error occurred. Our team has been notified!")};
h.handleApplicationErrors=function(a){for(var c=0;c<a.length;c++)b.warn('Unhandled async application error "',a[c].message,'" :',a[c]);h.asyncErrors.handle(a)};h.asyncErrors={fieldErrors:{},errors:[],add:function(a,c){h.asyncErrors.fieldErrors={};if(a)h.asyncErrors.errors=h.asyncErrors.errors.concat(a);if(a&&b.fn.valid){for(var d=0;d<a.length;d++)if(a[d].field){var e;e=c?c.find('[name="'+a[d].field+'"]'):b('[name="'+a[d].field+'"]');if(e.length&&e.is(":visible")){if(!c||c.length==0)c=e.parents("form");
h.asyncErrors.fieldErrors[a[d].field]={message:a[d].message,val:e.val(),original:a[d]}}}c&&c.each(function(){b(this).valid()})}},handle:function(a){b.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++)a[c]._handled=true},getUnhandledErrors:function(){for(var a=[],c=0;c<h.asyncErrors.errors.length;c++)h.asyncErrors.errors[c]._handled||a.push(h.asyncErrors.errors[c]);return a},clear:function(){h.asyncErrors.errors=[];h.asyncErrors.fieldErrors={}}};if(b.validator&&b.fn.validate){b.validator.addMethod("asyncError",
function(a,c,d){if(!d)return true;a=b(c).val();var e="";if(c.name in h.asyncErrors.fieldErrors)e=h.asyncErrors.fieldErrors[c.name].val||"";if(d instanceof Object&&d.connect&&d.display){a+=b('[name="'+d.connect+'"]').val();if(d.connect in h.asyncErrors.fieldErrors)e+=h.asyncErrors.fieldErrors[d.connect].val||""}else if(d instanceof Object&&d.connect&&!d.display){this.check(b('[name="'+d.connect+'"]'));return true}fail=c.name in h.asyncErrors.fieldErrors&&a==e;return!fail},function(a,c){var d=h.asyncErrors.fieldErrors[c.name],
e=d.message;h.asyncErrors.handle(d.original);return e});h.defaultValidationOptions={};h.getValidationOptions=function(a){function c(d){if(typeof d=="string"){var e={};b.each(d.split(/\s/),function(){e[this]=true});d=e}return d}a=b.extend({},h.defaultValidationOptions,a);if(a.rules)for(k in a.rules){a.rules[k]=c(a.rules[k]);if(!("asyncError"in a.rules[k]))a.rules[k].asyncError=true}return a};b.fn._oldValidate=b.fn.validate;b.fn.validate=function(a){a=h.getValidationOptions(a);return b(this)._oldValidate(a)}}else b.fn.validate=
function(){b.warn("You need to install jQuery validation plugin for validation to work! http://bassistance.de/jquery-plugins/jquery-plugin-validation/")}})(jQuery);
(function(b){var h=b[b.QUAID];h.Loader=Class.extend("Loader",{defaults:{image:"16x16_arrows.gif",location:{position:"absolute",right:5,top:5},opacity:0.4}},{init:function(a,c){this._super(a,c,h.Loader.defaults);this.loadingCount=0;this.loaderCreated=false},_createLoader:function(){this.loaderCreated=true;var a=this,c=b("<div/>"),d=b("<img/>");d[0].src=this.settings.image;c.append(d);c.addClass("inline-loader");c.hide();this.container.append(c);this.loader=c;this.container.css("position")=="static"&&
this.container.css("position","relative");if(this.settings.location=="center"){var e=new Image;e.onload=function(){var g=a.container.height(),f=a.container.width();a.setLocation({position:"absolute",top:g/2-e.height/2,left:f/2-e.width/2});e.onload=function(){}};e.src=a.settings.image}else a.setLocation(a.settings.location)},_show:function(){this.loaderCreated||this._createLoader();if(!this.isLoading()){this.oldOpacity=this.container.css("opacity");this.container.css("opacity",""+this.settings.opacity);
this.loader.css("display","block")}},_hide:function(){if(this.isLoading()){!this.oldOpacity||this.oldOpacity=="1"?this.container.css("opacity",""):this.container.css("opacity",this.oldOpacity);this.loader.css("display","none")}},setLocation:function(a){this.settings.location=a;this.loader&&this.loader.css(a)},isLoading:function(){if(this.loader)return this.loader.css("display")=="block";return false},startLoading:function(){this.loadingCount++;this._show()},stopLoading:function(){this.loadingCount=
Math.max(0,this.loadingCount-1);this.loadingCount==0&&this._hide()}});h.AsyncLoader=h.Loader.extend("AsyncLoader",{defaults:{ajaxOptions:{type:"POST",dataType:"json"},onPostLoad:null}},{init:function(a,c){this._super(a,b.extend(true,{},this._class.defaults,c))},_onPostLoad:function(a,c){b.isFunction(this.settings.onPostLoad)&&this.settings.onPostLoad.call(this,a,c)},load:function(a,c,d,e){function g(i,l){return function(){b.isFunction(l)&&l.apply(this,arguments);f.stopLoading();f._onPostLoad.call(f,
i,arguments)}}if(!a){b.log("AsyncLoader.load on ",this.container,": load() needs a url, f00! Seriously.");return false}var f=this;f.startLoading();return b.ajax(b.extend(f.settings.ajaxOptions,{url:a,data:c,success:g("success",b.isFunction(d)?d:f.settings.ajaxOptions.success),applicationError:g("fail",b.isFunction(e)?e:f.settings.ajaxOptions.applicationError)}))}});h.SingleResourceAsyncLoader=h.AsyncLoader.extend("SingleResourceAsyncLoader",{defaults:{url:"",onSuccess:null,onFail:null}},{init:function(a,
c){this._super(a,b.extend({},this._class.defaults,c));this.currentRequest=null;this.lastParams={}},_onPostLoad:function(a,c){this.currentRequest=null;this._super(a,c)},load:function(a){this.lastParams=a||this.lastParams;if((a=this._super(this.settings.url,this.lastParams,this.settings.onSuccess,this.settings.onFail))&&this.currentRequest){this.currentRequest.abort();this.stopLoading()}this.currentRequest=a}})})(jQuery);
(function(b){var h=b[b.QUAID];h.Textbox=Class.extend("Textbox",{init:function(a,c){this._super(a,c,{});this.box=b(a)},val:function(a){return this.box.val(a)},getSelection:function(){var a=this.box[0],c="";if(document.selection!=undefined){a.focus();c=document.selection.createRange().text}else if(a.selectionStart!=undefined)c=a.value.substring(a.selectionStart,a.selectionEnd);return c}});h.IntBox=h.Textbox.extend("IntBox",{init:function(a,c){var d=b.extend({},this.defaults,c);this._super(a,d);self=
this;this.box.keypress(function(e){if(self.val().length>d.maxDigits-1&&!(e.which in h.controlChars)&&!self.getSelection())return false;if(e.which!=8&&e.which!=0&&e.which!=13&&(e.which<48||e.which>57))return d.onFail.call(self,e.which);return true});return this},defaults:{onFail:function(){return false},maxDigits:7}});h.DecimalBox=h.IntBox.extend("DecimalBox",{init:function(a,c){var d=b.extend({},{},c),e=this;d.onFail=function(g){g==46&&e.val().length==0&&e.val("0");return g==46&&e.val().indexOf(".")<
0};this._super(a,d)}});h.Form=Class.extend("Form",{defaults:{dataTypes:{},validationOptions:{},defaultData:{},resetInitially:false,onLoad:function(){},onSubmit:function(){}},dataTypes:{"int":function(a){a.IntBox()},decimal:function(a){a.DecimalBox()}}},{init:function(a,c){var d=this;d._super(a,b.extend(true,{},d._class.defaults,c));settings=d.settings;if(a.is("form"))d.form=a;else{d.form=a.find("form");if(!d.form.length){b.error("Cannot find form in",a,"!! You need a form. Fo' Real!");return}}d.form.validate(settings.validationOptions);
settings.resetInitially&&this.reset();for(var e in settings.dataTypes){var g=d.getElement(e);g.length&&d._setElementDataFilter(g,settings.dataTypes[e])}d.form.submit(function(){return d._onSubmit(arguments)})},_setElementDataFilter:function(a,c){b.isFunction(this._class.dataTypes[c])&&this._class.dataTypes[c].call(this,a)},_setData:function(a,c){if(a.attr("type")=="radio")a.each(function(){b(this).val()==c&&b(this).attr("checked","checked")});else if(a.attr("type")=="checkbox")c?a.attr("checked",
"checked"):a.attr("checked",null);else a.val(c)},_onSubmit:function(){if(b.isFunction(this.settings.onSubmit))return this.settings.onSubmit.call(this,this.form,b.parseUrlParams(this.form.formSerialize()),arguments);return true},getElement:function(a){return this.form.find('input[name="'+a+'"], textarea[name="'+a+'"], select[name="'+a+'"]')},val:function(a,c){var d=this.getElement(a);if(c!=undefined)return this._setData(d,c);if(d.eq(0).attr("type")=="radio")return d.filter(":checked").val();else if(d.attr("type")==
"checkbox")return d.is(":checked");return d.val()},focusFirst:function(){this.form.find('input[type="text"]:first, textarea:first').focus()},reset:function(){for(var a=this.form.find("input, textarea, select"),c=this.settings.defaultData,d=0;d<a.length;d++){var e=a.eq(d),g=e.attr("name");if(e.attr("type")!="submit"){var f="";if(g in c)f=c[g];this._setData(e,f)}}},load:function(a){b.isFunction(this.settings.onLoad)&&this.settings.onLoad.call(this,a);for(var c in a)this.val(c,a[c])},hide:function(){this.container.hide()},
show:function(){this.container.show();this.focusFirst()},submit:function(){this.form.submit()}});h.AsyncForm=h.Form.extend("AsyncForm",{defaults:{loaderLocation:{position:"absolute",bottom:5,left:5},ajaxOptions:{dataType:"json"},autoGenValidationOptions:false,validationOptions:{},onSuccess:function(){},onFail:function(){}}},{init:function(a,c){var d=this;c=b.extend(true,{},d._class.defaults,c);if(c.autoGenValidationOptions){for(var e=c.validationOptions.rules||{},g=a.find("input, select, textarea"),
f=0;f<g.length;f++)g[f].name in e||(e[g[f].name]={required:false});c.validationOptions.rules=e}c.validationOptions.submitHandler=function(){d.loader.startLoading();c.ajaxOptions.form=d.form;var i=b.extend(c.ajaxOptions,{success:function(){d.onSuccess.apply(d,arguments);d.loader.stopLoading()},applicationError:function(){d.onFail.apply(d,arguments);d.loader.stopLoading()}});d.form.ajaxSubmit(i)};d._super(a,c);d.loader=d.form.Loader({location:d.settings.loaderLocation})},onSuccess:function(){b.isFunction(this.settings.onSuccess)&&
this.settings.onSuccess.apply(this,arguments)},onFail:function(){b.isFunction(this.settings.onFail)&&this.settings.onFail.apply(this,arguments)}})})(jQuery);
